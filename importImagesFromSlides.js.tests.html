<script>
//createLabel
//createInput
//createRootSlideElement
//addSlideList
//importImages
//getSlideCount
//importMultipleSlideImages
//loaded
//addImagesToList
describe("Import images from slides with menu and image section. ", function(){
    before('get slide list', function(){
      importImagesFromSlides.getSlideCount();
    })
    it("should detect how many slides are in a document", function(done){
      
      setTimeout(function(){
      var result = importImagesFromSlides.slideCount;
       expect(result).to.equal(3)
       done();
      },1500)
     
    });
    it("should create a lable for each slide in the document", function(){
      var result = importImagesFromSlides.createLabel(1);
      expect(result).to.have.text('Slide 1');
      expect(result).to.have.attr('for');
    });
    it("should create a checkbox for each slide in the document", function(){
     var result = importImagesFromSlides.createInput(1);
      expect(result).to.have.id('box-1');
      expect(result).to.have.value('1');
      expect(result).to.have.match('[type="checkbox"]');
    });
    it("should import all images in a slide when a checkbox is clicked", function(){
      var result = importImagesFromSlides.detectSlidesToImportImagesFrom();
      expect(JSON.stringify(result)).to.equal(JSON.stringify(['1']));
    });
    it("should empty the output when a checkbox is clicked ready for the new images");
    it("should append multiple checkboxes and labels to the dom", function(){
      var result = importImagesFromSlides.addSlideList();
      var html = '<div class="boxes"><input type="checkbox" value="1" id="box-1"><label for="box-1">Slide 1</label></div><div class="boxes"><input type="checkbox" value="2" id="box-2"><label for="box-2">Slide 2</label></div><div class="boxes"><input type="checkbox" value="3" id="box-3"><label for="box-3">Slide 3</label></div>';
      expect(result).to.have.length(3);
      expect(result).to.have.html(html);
    });
    it("should import a single selected image as needed");
    it("should be able to append imported images to the dom as a card", function(){
      var images = ["https://lh6.googleusercontent.com/3H_2ghLnguJJ9fvjâ€¦-i2yO-tY-rYYRkJzgmJMYsPFB_-cWDxS2HrdoqBOF329X3__Y"];
      var result = importImagesFromSlides.addImagesToList(images);
      var html = '<div class="image-select">\n                      <img data-SlideImageId="undefined" data-forCanvas ="undefined" onload="importImagesFromSlides.loaded(this)" alt="loading" id="img-0" src="undefined" width="125">\n                      <div class="image-name">\n                       <input data-originalTitle="undefined" data-slideImageId="undefined" onfocusout="importImagesFromSlides.addTitleToSlideImage(this)" value="undefined" id="img-name-0" type="text" placeholder="add title..." /> \n                      </div>\n                    </div>'
    //  expect(result.length).to.equal(436);
      expect(result).to.equal(html)
    });
    it("should hide a loading gif when an image has finished loading");
    it("should get the image title and ID if one exists.", function(done){
     var result = function(data){
       expect(data[0].title).to.equal('boy V2')
       expect(data[0].id).to.equal('g3e2d2fc8e1_0_1')
       done()
     } 
     google.script.run.withSuccessHandler(result).withFailureHandler(errorDisplay).getImagesFromSlide(['1']);
    });
    it("should add new image title back to current images",function(done){
      var currentTitle = 'Test 1';
      var imageSlideId = 'g3e2d2fc8e1_0_1';
      var result = function(data){
       expect(data.title).to.equal('Test 1');
       expect(data.elementId).to.equal('g3e2d2fc8e1_0_1');
       done()
     }       
      google.script.run.withSuccessHandler(result).withFailureHandler(errorDisplay).updateImageData(imageSlideId, currentTitle);
      currentTitle = 'boy V2';
      var imageSlideId = 'g3e2d2fc8e1_0_1';
      google.script.run.withSuccessHandler(function(){return}).withFailureHandler(errorDisplay).updateImageData(imageSlideId, currentTitle);
      // get the image again and check it worked, then change back to boy V2
    });
   
    it("should check one image element has it's id attached", function(done){
      var result = document.getElementById('img-0');
      setTimeout(function(){
        expect(result).to.have.id('img-0');
        done();
      }, 1600)
      
    });
    it("should check one image element has canvas data attached", function(done){
      var result = document.getElementById('img-0').getAttribute('data-forCanvas');
      console.log(result)
      setTimeout(function(){
        expect(result).to.have.id('img-0');
        done();
      }, 1600)
      
    });
    it("should check one image element has the slide is came from attached");
    it("should check one image element has a title attached");
    it("should see that any new name of an image changed in the ui is sent back to the correct slide");
    it("should handle the case where the title is set to empty");
    
});


</script>