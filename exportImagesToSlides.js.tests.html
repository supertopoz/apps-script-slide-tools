<script>
describe("export images to slide", function(){

    it("should get a data URL from canvas", function(){
      var url = exportImagesToSlides.dataURL();
      var result = url.indexOf('data:image/png;base64') >= 0
      result.should.equal(true)
  	})
  	it("should find a function for replacing images", function(){
        var result = exportImagesToSlides.replaceImageInSlide; 
        (typeof(result)).should.equals('function')
	})
    it("should find a function for inserting images", function(){
        var result = exportImagesToSlides.addImageAtGridLocation; 
        (typeof(result)).should.equals('function')
	})
    it("should extract the square that was click in the grid", function(){
      var result = exportImagesToSlides.getClickedSquareNumber('3-2-grid-select-0'); 
      (result).should.equals(0)
    })
    it("should extract the grid dimensions from the clicked square id", function(){
      var result = exportImagesToSlides.getGridDementions('3-2-grid-select-0'); 
      (result).should.equals('32')
    })// addLoader
    it("should check a loader css class is added to clicked grid square", function(){
      var result = exportImagesToSlides.addLoader('3-2-grid-select-0'); 
      //(result).should.equals('32')
      expect(document.querySelector('#\\33-2-grid-select-0')).to.have.class('mini-grid-square-loading')
    })
    it("should check a loader css class is removed from a grid square", function(){
      var result = exportImagesToSlides.removeLoader('callBack - place holder','3-2-grid-select-0'); 
      //(result).should.equals('32')
      expect(document.querySelector('#\\33-2-grid-select-0')).to.have.class('mini-grid-mini-square')
    })
    describe("Looks at the JSON string generated by the canvas to check it contains needed data", function(){
      this.timeout(10000);
      var result = ''
      before('insert example image to slide', function(){
           addColorPallet.insertFreeText();
           result = exportImagesToSlides.addImageAtGridLocation('3-2-grid-select-2');
      })

//      it("should check if before sending to the slide the image contains a title from the DOM", function(){
//      //3-2-grid-select-2
//
//       var example = [{"originalTitle": "boy V2"},{"canvasText": "boy V2"},{"canvasText":"Click Me!"}]  
//       expect(JSON.stringify(result[1])).to.equal(JSON.stringify(example));
//       expect(result[1][0].originalTitle).to.equal("boy V2");
//      });
      it("should check if there will be only one title.", function(){
        var example = [{"canvasText": "boy V2"}]
        var result = exportImagesToSlides.checkIfTitleInputIsNeeded(example);
        expect(JSON.stringify(result)).to.equal(JSON.stringify(['boy V2']));
        example = [{"canvasText": "boy V2"}];
        result = exportImagesToSlides.checkIfTitleInputIsNeeded(example);
        expect(JSON.stringify(result)).to.equal(JSON.stringify(['boy V2']));
    

      });
      it("should check if canvas has more than one piece of text before export", function(){
        var example = [{"canvasText": "boy V2"},{"canvasText":"Click Me!"}]
        var result = exportImagesToSlides.checkIfTitleInputIsNeeded(example);
        expect(JSON.stringify(result)).to.equal(JSON.stringify(["boy V2", "Click Me!"]));
      });
      it("should offer the user three choices if more than one text is avaialble.");
      it("should offer the user the choice of the orginal name if available.");
      it("should offer the user the choices from the canvas text if available.");
      it("should offer the user the choices to add their own name");
      it("should check that a title is sent to the slide");
      it("should check that the canvas json is sent to the slide.");
    })
    
})
</script>